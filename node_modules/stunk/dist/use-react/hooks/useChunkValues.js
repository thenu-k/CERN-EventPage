import { useState, useEffect } from "react";
/**
 * Hook to read values from multiple chunks at once.
 * Only re-renders when any of the chunk values change.
 */
export function useChunkValues(chunks) {
    const [values, setValues] = useState(() => {
        return chunks.map(chunk => chunk.get());
    });
    useEffect(() => {
        const unsubscribes = chunks.map((chunk, index) => {
            return chunk.subscribe((newValue) => {
                setValues(prev => {
                    const newValues = [...prev];
                    newValues[index] = newValue;
                    return newValues;
                });
            });
        });
        return () => {
            unsubscribes.forEach(unsubscribe => unsubscribe());
        };
    }, [chunks]);
    return values;
}
